(()=>{"use strict";var e={20:(e,t,i)=>{var o=i(609),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.Fragment=r,t.jsx=function(e,t,i){var o,r={},c=null,d=null;for(o in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,o)&&!s.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:d,props:r,_owner:n.current}}},609:e=>{e.exports=window.React},848:(e,t,i)=>{e.exports=i(20)}},t={};const i=window.wc.blocksCheckout,o=window.wp.i18n,a=window.wp.element,r=window.wc.blocksComponents,l=window.wp.data,n=window.wc.wcBlocksData,s=window.wp.hooks,c=(0,a.createContext)({validationSettings:{},isRequired:!1,hasRequiredLogic:!1,isVisible:!0});var d=function i(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,i),r.exports}(848);const u=({children:e})=>(0,d.jsx)(d.Fragment,{children:e}),f=()=>({isVisible:!0,isRequired:!1,hasRequiredLogic:!1}),h=({conditionalLogic:e,validationSettingsRaw:t,children:i,fieldName:o,setExtensionData:r,metaName:l})=>{const n=(0,s.applyFilters)("checkoutFields.hooks.useConditionalLogic",f),u=(0,a.useMemo)(()=>{try{return JSON.parse(t||"{}")}catch(e){return console.warn("Invalid validation settings:",t),{}}},[t]),h=(e=>(0,a.useMemo)(()=>{if(!e)return null;if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse conditional logic:",e),null}return e},[e]))(e),{isVisible:m,isRequired:p,hasRequiredLogic:k}=n(h,o),g=(0,a.useMemo)(()=>({validationSettings:u,isRequired:p,hasRequiredLogic:k,isVisible:m}),[u,p,k,m]);return(0,a.useEffect)(()=>{m||r("checkout-fields-for-blocks",l,"")},[m,r,l]),m?(0,d.jsx)(c.Provider,{value:g,children:i}):null};function m({conditionalLogic:e,validationSettingsRaw:t,children:i,fieldName:o,setExtensionData:a,metaName:r}){const l=(0,s.applyFilters)("checkoutFields.components.logicContextProvider",u);return(0,d.jsx)(l,{children:(0,d.jsx)(h,{conditionalLogic:e,validationSettingsRaw:t,fieldName:o,setExtensionData:a,metaName:r,children:i})})}const p=window.wp.url,k={required:{validate:e=>e&&""!==e.trim()?null:(0,o.__)("This field is required.","checkout-fields-for-blocks")},email:{validate:e=>(0,p.isEmail)(e)?null:(0,o.__)("Please enter a valid email address.","checkout-fields-for-blocks")},phone:{validate:e=>e&&!/^\+?[\d\s()-]{10,}$/.test(e)?(0,o.__)("Please enter a valid phone number.","checkout-fields-for-blocks"):null},url:{validate:e=>{try{return new URL(e),null}catch{return(0,o.__)("Please enter a valid URL.","checkout-fields-for-blocks")}}},minLength:{validate:(e,t)=>e.length>0&&e.length<t.value?(0,o.sprintf)(/* translators: %d is the number of characters. */ /* translators: %d is the number of characters. */
(0,o.__)("This field must be at least %d characters long.","checkout-fields-for-blocks"),t.value):null},maxLength:{validate:(e,t)=>e.length>0&&e.length>t.value?(0,o.sprintf)(/* translators: %d is the number of characters. */ /* translators: %d is the number of characters. */
(0,o.__)("This field must not exceed %d characters.","checkout-fields-for-blocks"),t.value):null},pattern:{validate:(e,t)=>new RegExp(t.value).test(e)?null:(0,o.__)("This field does not match the required pattern.","checkout-fields-for-blocks")}},g=e=>{const{fieldId:t,metaName:i,label:o,className:s,defaultValue:u,isChecked:f,checkoutExtensionData:h}=e,{setExtensionData:m}=h,[p,g]=(0,a.useState)(!!f),{validateField:b,validationErrorId:v,isRequired:w}=((e,t)=>{const{validationSettings:i,isRequired:o,hasRequiredLogic:r,isVisible:s}=(0,a.useContext)(c),[d,u]=(0,a.useState)(!1),{setValidationErrors:f,clearValidationError:h}=(0,l.useDispatch)(n.VALIDATION_STORE_KEY),m=`${t}-${e}`;return{validateField:(0,a.useCallback)((e,t=!1)=>{const a={...i};r&&(a.required={enabled:o});const l=((e,t)=>{for(const[i,o]of Object.entries(t))if(o.enabled&&k[i]){const t=k[i].validate(e,o);if(t)return t}return null})(e,a);return l?(f({[m]:{message:l,hidden:!t}}),!1):(h(m),!0)},[i,o,r,m,h,f]),handleUserInteraction:(0,a.useCallback)(()=>{d||u(!0)},[d]),validationErrorId:m,isRequired:o,isVisible:s}})(t,i),{validationError:x,validationErrorId:y}=(0,l.useSelect)(e=>{const t=e(n.VALIDATION_STORE_KEY);return{validationError:t.getValidationError(v),validationErrorId:t.getValidationErrorId(v)}},[v]),_=!(!x?.message||x?.hidden);return(0,a.useEffect)(()=>{m("checkout-fields-for-blocks",i,p?u:"")},[p,m,i,u]),(0,a.useEffect)(()=>{b(p?u:"",!1)},[b,p,u]),(0,d.jsx)("div",{className:s,children:(0,d.jsx)(r.CheckboxControl,{id:t,name:i,checked:p,onChange:()=>g(!p),hasError:_,"data-field-name":i,required:w,children:(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})})})},b=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"checkout-fields-for-blocks/checkbox-input","version":"0.1.0","title":"Checkbox","category":"checkout-fields-for-blocks","description":"","supports":{"html":true},"keywords":["checkout"],"parent":["woocommerce/checkout-totals-block","woocommerce/checkout-fields-block","woocommerce/checkout-contact-information-block","woocommerce/checkout-shipping-address-block","woocommerce/checkout-billing-address-block","woocommerce/checkout-shipping-method-block","woocommerce/checkout-shipping-methods-block","woocommerce/checkout-pickup-options-block"],"attributes":{"fieldId":{"type":"string","default":""},"fieldName":{"type":"string","default":""},"metaName":{"type":"string","default":""},"isMetaNameLocked":{"type":"boolean","default":false},"parentBlock":{"type":"string","default":""},"label":{"type":"string","default":""},"defaultValue":{"type":"string","default":""},"isChecked":{"type":"boolean","default":false},"helpText":{"type":"string","default":""},"className":{"type":"string","default":""},"validationSettings":{"type":"object","default":{"required":{"enabled":false}}},"display":{"type":"object","default":{"orderConfirmation":"","orderAdmin":"","orderMyAccount":"","orderEmail":""}},"conditionalLogic":{"type":"object","default":{"enabled":false,"visible":[],"required":[]}},"pricingSettings":{"type":"object","default":{"enabled":false,"pricing":{"calculationMethod":"","priceValue":"","taxClass":""}}}},"textdomain":"checkout-fields-for-blocks","style":"file:./style-index.css"}');(0,i.registerCheckoutBlock)({metadata:b,component:e=>{const{conditionalLogic:t,validationSettings:i,label:o,metaName:a,checkoutExtensionData:r}=e,{setExtensionData:l}=r;return(0,d.jsx)(m,{conditionalLogic:t,validationSettingsRaw:i,fieldName:o||"Checkbox",setExtensionData:l,metaName:a,children:(0,d.jsx)(g,{...e})})}})})();