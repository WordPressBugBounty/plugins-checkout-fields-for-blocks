(()=>{"use strict";var e={20:(e,t,i)=>{var a=i(609),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.Fragment=l,t.jsx=function(e,t,i){var a,l={},c=null,d=null;for(a in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,a)&&!s.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:d,props:l,_owner:r.current}}},609:e=>{e.exports=window.React},848:(e,t,i)=>{e.exports=i(20)}},t={};const i=window.wc.blocksCheckout,a=window.wp.i18n,o=window.wp.element,l=window.wp.hooks,n=(0,o.createContext)({validationSettings:{},isRequired:!1,hasRequiredLogic:!1,isVisible:!0});var r=function i(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,i),l.exports}(848);const s=({children:e})=>(0,r.jsx)(r.Fragment,{children:e}),c=()=>({isVisible:!0,isRequired:!1,hasRequiredLogic:!1}),d=({conditionalLogic:e,validationSettingsRaw:t,children:i,fieldName:a,setExtensionData:s,metaName:d})=>{const u=(0,l.applyFilters)("checkoutFields.hooks.useConditionalLogic",c),f=(0,o.useMemo)(()=>{try{return JSON.parse(t||"{}")}catch(e){return console.warn("Invalid validation settings:",t),{}}},[t]),p=(e=>(0,o.useMemo)(()=>{if(!e)return null;if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse conditional logic:",e),null}return e},[e]))(e),{isVisible:h,isRequired:m,hasRequiredLogic:k}=u(p,a),b=(0,o.useMemo)(()=>({validationSettings:f,isRequired:m,hasRequiredLogic:k,isVisible:h}),[f,m,k,h]);return(0,o.useEffect)(()=>{h||s("checkout-fields-for-blocks",d,"")},[h,s,d]),h?(0,r.jsx)(n.Provider,{value:b,children:i}):null};function u({conditionalLogic:e,validationSettingsRaw:t,children:i,fieldName:a,setExtensionData:o,metaName:n}){const c=(0,l.applyFilters)("checkoutFields.components.logicContextProvider",s);return(0,r.jsx)(c,{children:(0,r.jsx)(d,{conditionalLogic:e,validationSettingsRaw:t,fieldName:a,setExtensionData:o,metaName:n,children:i})})}const f=window.wp.data,p=window.wc.wcBlocksData,h=window.wp.url,m={required:{validate:e=>e&&""!==e.trim()?null:(0,a.__)("This field is required.","checkout-fields-for-blocks")},email:{validate:e=>(0,h.isEmail)(e)?null:(0,a.__)("Please enter a valid email address.","checkout-fields-for-blocks")},phone:{validate:e=>e&&!/^\+?[\d\s()-]{10,}$/.test(e)?(0,a.__)("Please enter a valid phone number.","checkout-fields-for-blocks"):null},url:{validate:e=>{try{return new URL(e),null}catch{return(0,a.__)("Please enter a valid URL.","checkout-fields-for-blocks")}}},minLength:{validate:(e,t)=>e.length>0&&e.length<t.value?(0,a.sprintf)(/* translators: %d is the number of characters. */ /* translators: %d is the number of characters. */
(0,a.__)("This field must be at least %d characters long.","checkout-fields-for-blocks"),t.value):null},maxLength:{validate:(e,t)=>e.length>0&&e.length>t.value?(0,a.sprintf)(/* translators: %d is the number of characters. */ /* translators: %d is the number of characters. */
(0,a.__)("This field must not exceed %d characters.","checkout-fields-for-blocks"),t.value):null},pattern:{validate:(e,t)=>new RegExp(t.value).test(e)?null:(0,a.__)("This field does not match the required pattern.","checkout-fields-for-blocks")}},k=({fieldId:e,fieldName:t,metaName:a,label:l,className:s,defaultValue:c,inputType:d,helpText:u,checkoutExtensionData:h})=>{const{setExtensionData:k}=h,[b,g]=(0,o.useState)(c||""),{validateField:v,validationErrorId:w,isRequired:y}=((e,t)=>{const{validationSettings:i,isRequired:a,hasRequiredLogic:l,isVisible:r}=(0,o.useContext)(n),[s,c]=(0,o.useState)(!1),{setValidationErrors:d,clearValidationError:u}=(0,f.useDispatch)(p.VALIDATION_STORE_KEY),h=`${t}-${e}`;return{validateField:(0,o.useCallback)((e,t=!1)=>{const o={...i};l&&(o.required={enabled:a});const n=((e,t)=>{for(const[i,a]of Object.entries(t))if(a.enabled&&m[i]){const t=m[i].validate(e,a);if(t)return t}return null})(e,o);return n?(d({[h]:{message:n,hidden:!t}}),!1):(u(h),!0)},[i,a,l,h,u,d]),handleUserInteraction:(0,o.useCallback)(()=>{s||c(!0)},[s]),validationErrorId:h,isRequired:a,isVisible:r}})(e,a),x=(0,o.useCallback)(e=>{g(e),v(e)},[v]),_=(0,o.useCallback)(()=>{v(b,!0)},[v,b]);(0,o.useEffect)(()=>{k("checkout-fields-for-blocks",a,b)},[k,a,b]),(0,o.useEffect)(()=>{v(b,!1)},[v,b]);const E=(0,o.useCallback)(e=>v(e.value,!0),[v]),R=(0,o.useMemo)(()=>({"aria-required":y,...y&&{required:!0}}),[y]);return(0,r.jsx)("div",{className:s,children:(0,r.jsx)(i.ValidatedTextInput,{id:e,type:d,name:t,label:l,value:b,customValidation:E,help:u,onChange:x,onBlur:_,errorId:w,"data-field-name":a,...R})})},b=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"checkout-fields-for-blocks/input-url","version":"0.1.0","title":"Url","description":"","category":"checkout-fields-for-blocks","supports":{"html":true},"keywords":["checkout"],"parent":["woocommerce/checkout-totals-block","woocommerce/checkout-fields-block","woocommerce/checkout-contact-information-block","woocommerce/checkout-shipping-address-block","woocommerce/checkout-billing-address-block","woocommerce/checkout-shipping-method-block","woocommerce/checkout-shipping-methods-block","woocommerce/checkout-pickup-options-block"],"attributes":{"fieldId":{"type":"string","default":""},"fieldName":{"type":"string","default":""},"metaName":{"type":"string","default":""},"isMetaNameLocked":{"type":"boolean","default":false},"parentBlock":{"type":"string","default":""},"label":{"type":"string","default":""},"defaultValue":{"type":"string","default":""},"helpText":{"type":"string","default":""},"className":{"type":"string","default":""},"validationSettings":{"type":"object","default":{"required":{"enabled":false},"minLength":{"enabled":false,"value":""},"maxLength":{"enabled":false,"value":""},"pattern":{"enabled":false,"value":""}}},"display":{"type":"object","default":{"orderConfirmation":"","orderAdmin":"","orderMyAccount":"","orderEmail":""}},"conditionalLogic":{"type":"object","default":{"enabled":false,"visible":[],"required":[]}},"pricingSettings":{"type":"object","default":{"enabled":false,"pricing":{"calculationMethod":"","priceValue":"","taxClass":""}}}},"textdomain":"checkout-fields-for-blocks"}');(0,i.registerCheckoutBlock)({metadata:b,component:e=>(e=>{const{conditionalLogic:t,validationSettings:i,label:a,fieldName:o,metaName:l,checkoutExtensionData:n}=e,{setExtensionData:s}=n;return(0,r.jsx)(u,{conditionalLogic:t,validationSettingsRaw:i,fieldName:a||o||"Text Input",setExtensionData:s,metaName:l,children:(0,r.jsx)(k,{...e})})})({...e,inputType:"url"})})})();